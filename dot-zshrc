export PATH=$HOME/bin:$HOME/.local/bin:/usr/local/bin:$PATH
export ZSH="$HOME/.oh-my-zsh"

# See https://github.com/ohmyzsh/ohmyzsh/wiki/Themes
ZSH_THEME="mytheme"

HYPHEN_INSENSITIVE="true"
COMPLETION_WAITING_DOTS="true"
HIST_STAMPS="yyyy-mm-dd"

# ENABLE_CORRECTION="true"
unsetopt correct_all  
setopt correct

zstyle ':omz:update' mode auto
# zstyle ':omz:update' frequency 13

plugins=(git colored-man-pages fancy-ctrl-z)
source /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh
source /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

export ZSH_COMPDUMP="$ZSH/cache/.zcompdump-$HOST"
export SONARLINT_USER_HOME="$HOME/.cache/sonarlint"

source $ZSH/oh-my-zsh.sh

lazy_load_nvm() {
  if [ -z "$NVM_DIR" ]; then
    unset -f node nvm npm npx
    export NVM_DIR="$HOME/.config/nvm"
    [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
  fi
}
node() {
  lazy_load_nvm
  node $@
}
nvm() {
  lazy_load_nvm
  nvm $@
}
npm() {
  lazy_load_nvm
  npm $@
}
npx() {
  lazy_load_nvm
  npx $@
}

find() {
  command find "$@" 2> >(grep -v 'Permission denied' >&2)
}

DOTFILES_DIR="$HOME/.local/share/dotfiles"
dotfiles-remove() {
  (cd $DOTFILES_DIR && stow --dotfiles -D -t $HOME .)
}
dotfiles-apply() {
  dotfiles-remove
  (cd $DOTFILES_DIR && stow --dotfiles -t $HOME .)
}

link-contents() {
  if [ ! -d $1 ]; then
    echo "Directory not found: $1"
    return 1
  fi
  for file in $1/*; do
    ln -s $file $2
  done
}

alias open="xdg-open"
alias zshconfig="open ~/.zshrc"
alias zshreload="source ~/.zshrc"
alias cat="bat"
alias cdesk="cd ~/Desktop"

export LC_DEV_CONFIG_PATH="$HOME/.config/LCBeyond"
export LC_ENV="108"
